# Commands

## Questions

- What about git bisect?

## Project initialization

- Setting up environment

```bash
git init # create .git folder
git clone <url> # copes existing repo from server to machine
git config --global user.name "Your name"
```

## Staging & Commiting

```bash
git status # shows which files are modified

# Adding file(s)
git add <file>
git add .
git add -p # iterates through changes and allows you to select which one you want to use
git commit -m "msg"
git commit --amend -m # fixes last message
```

## Branching & context switching

```bash
git branch # show all your branches
git branch -a # inclues remote branches
git checkout <name> # checkout to existing branch
git checkout -b <name> # create a new branch
git switch - # handy shortcut to jump back to previous branch you were on
git branch -d <name>
```

## Sync with the "truth" (remote repos)

```bash
git remote -v # shows where you local code is connected to
git fetch # checks the server for updates, but doesn't touch the code. Safe to run anytime
git pull # fetches + merge
git pull --rebase ## to learn
git push -u origin <branch> # send local snapshots to server
```

### `git pull --rebase`

- Cleaner way to stay up to date
  - by default `git pull` does a merge

How does `git pull --rebase` work?

1. Lifts your local commits that aren't on the server yet
2. Downloads the new commits from the server (the base)
3. Replays your local commits, one by one, on top of the new base

| strategy          | command            | best for                                             |
| ----------------- | ------------------ | ---------------------------------------------------- |
| default (merge)   | git pull           | preserving chronological truth                       |
| rebase            | git pull --rebase  | keeping a clean, linear project history              |
| fast-forward only | git pull --ff-only | Ensure never to accidentally create a merge conflict |

## Inspection and comparison

```bash
git log --oneline --graph --all # shows visual tree of history
git diff # shows what changed, but haven't been staged yet
git diff --staged # what you staged, but haven't commited
git blame <file> # shows line-by-line who last edited a file and why
```

## Temporary storage & snipping (power tools)

```bash
git stash # hits 'pause'. Hides uncommited work so you can switch branches
git stash pop # hits 'play'. Brings back hidden work
git cherry-pick <hash> # snipes a single commit from another branch and applies to your current one
git rebase -i HEAD~n # squash tool. Rewrites the last `n` commits to clean them up
```

## Emergency kit (undo commands)

```bash
git restore --staged <file> # unstages a file
git restore <file> # restore the file
git reset --soft HEAD~n # undoes `n` commits + keeps the code
git reset --hard HEAD~n # undoes `n` commits + DOESN'T keep the code! (danger)

git rm -r <folder-name> # remove the folder recursively

# this merge/rebase is a mess!
git merge --abort
git rebase --abort
```
